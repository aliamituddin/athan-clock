

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Stack Configurations &mdash; SimpleLink™ CC26x2 SDK BLE5-Stack User&#39;s Guide 1.02.01.00 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="SimpleLink™ CC26x2 SDK BLE5-Stack User&#39;s Guide 1.02.01.00 documentation" href="../index.html"/>
        <link rel="up" title="Developing a Bluetooth Low Energy Application" href="index-cc26x2.html"/>
        <link rel="next" title="Memory Map" href="../ble-stack-common/memory_map.html"/>
        <link rel="prev" title="Defining Application Behavior" href="creating-a-custom-bluetooth-low-energy-application.html"/> 
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug ble-stack-5.x stack-configuration";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script> 

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8">     



  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="../_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../ble-stack-5.x-guide/index-cc26x2.html" class="icon icon-home"> SimpleLink™ CC26x2 SDK BLE5-Stack User's Guide
          

          
          </a>

          
            
            
              <div class="version">
                1.02.01.00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/platform-cc26x2.html">The CC26x2 SDK Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-tirtos/index.html">TI-RTOS (RTOS Kernel) Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index-cc26x2.html">Developing a Bluetooth Low Energy Application</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="the-application.html">The Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-cc26x2.html#the-stack">The Stack</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index-cc26x2.html#creating-a-custom-bluetooth-low-energy-application">Creating a Custom Bluetooth low energy Application</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="creating-a-custom-bluetooth-low-energy-application.html">Defining Application Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-a-custom-bluetooth-low-energy-application.html#compiler-options">Compiler Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-a-custom-bluetooth-low-energy-application.html#linker-options">Linker Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-a-custom-bluetooth-low-energy-application.html#creating-additional-icall-enabled-tasks">Creating Additional ICall Enabled Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-a-custom-bluetooth-low-energy-application.html#using-production-test-mode-ptm">Using Production Test Mode (PTM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-a-custom-bluetooth-low-energy-application.html#optimizing-bluetooth-low-energy-stack-memory-usage">Optimizing Bluetooth low energy Stack Memory Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-a-custom-bluetooth-low-energy-application.html#defining-bluetooth-low-energy-behavior">Defining Bluetooth Low Energy Behavior</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Stack Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-bluetooth-low-energy-protocol-stack-features">Configuring Bluetooth low energy Protocol Stack Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-time-bluetooth-low-energy-protocol-stack-configuration">Run-Time Bluetooth low energy Protocol Stack Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index-cc26x2.html#memory-management">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-cc26x2.html#running-the-sdk-on-custom-boards">Running the SDK on Custom Boards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sensor-controller/sensor-controller.html">Sensor Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging/ble-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-oad/index.html">Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/migration-cc26x2.html">Updating from previous SDKs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/api-reference.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ble-stack-5.x-guide/reference-cc26x2.html">Terms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../ble-stack-5.x-guide/index-cc26x2.html">SimpleLink™ CC26x2 SDK BLE5-Stack User's Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../ble-stack-5.x-guide/index-cc26x2.html">Docs</a> &raquo;</li>
      
          <li><a href="index-cc26x2.html">Developing a Bluetooth Low Energy Application</a> &raquo;</li>
      
    <li>Stack Configurations</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="stack-configurations">
<span id="stack-features-configuration"></span><h1>Stack Configurations<a class="headerlink" href="#stack-configurations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="configuring-bluetooth-low-energy-protocol-stack-features">
<h2>Configuring Bluetooth low energy Protocol Stack Features<a class="headerlink" href="#configuring-bluetooth-low-energy-protocol-stack-features" title="Permalink to this headline">¶</a></h2>
<p>The Bluetooth low energy protocol stack can be configured to include
or exclude certain Bluetooth Low Energy features by changing the
library configuration in the stack project. The available Bluetooth
low energy features are defined in the <code class="docutils literal"><span class="pre">build_config.opt</span></code> file in
the Tools folder of the stack project within the IDE. Based on the
features selected in the <code class="docutils literal"><span class="pre">build_config.opt</span></code> file, the <code class="docutils literal"><span class="pre">lib_search.exe</span></code> tool
selects the respective precompiled library during the build process of the
stack project.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Selecting the correct stack configuration is essential in
optimizing the amount of flash memory available to the application.
To conserve memory, exclude certain Bluetooth Low Energy protocol
stack features that may not be required.</p>
</div>
</div>
<div class="section" id="run-time-bluetooth-low-energy-protocol-stack-configuration">
<h2>Run-Time Bluetooth low energy Protocol Stack Configuration<a class="headerlink" href="#run-time-bluetooth-low-energy-protocol-stack-configuration" title="Permalink to this headline">¶</a></h2>
<p>The Bluetooth low energy protocol stack can be configured with
various parameters that control its runtime behavior and RF antenna
layout. The available configuration parameters are described in
the <code class="docutils literal"><span class="pre">ble_user_config.h</span></code> file in the ICallBLE IDE folder of the
application. During initialization, these parameters are supplied to the
Bluetooth Low Energy protocol stack by the <code class="docutils literal"><span class="pre">user0Cfg</span></code> structure, declared in
main.c.</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;ble_user_config.h&quot;</span><span class="cp"></span>

<span class="c1">// BLE user defined configuration</span>
<span class="n">bleUserCfg_t</span> <span class="n">user0Cfg</span> <span class="o">=</span> <span class="n">BLE_USER_CFG</span><span class="p">;</span>
</pre></div>
</div>
<p>Because the <code class="docutils literal"><span class="pre">ble_user_config.h</span></code> file is shared filed between the Bluetooth
Low Energy projects within the SDK, TI recommends defining configuration
parameters in the <code class="docutils literal"><span class="pre">.opt</span></code> files found under <code class="docutils literal"><span class="pre">TOOLS\defines</span></code>. The <code class="docutils literal"><span class="pre">.opt</span></code>
files contain preprocessor symbols of the application when the default value
isn’t sufficient. For example, to change the maximum PDU size from the default
27 to 162, set the preprocessor symbol <code class="docutils literal"><span class="pre">MAX_PDU_SIZE=162</span></code> in the
preprocessor symbols for the application project. Increasing certain
parameters may increase heap memory use by the protocol stack;
adjust the <code class="docutils literal"><span class="pre">HEAPMGR_SIZE</span></code> as required (if not using auto sized heap).
<a class="reference internal" href="#stackconfigurablefeatures"><span class="std std-numref">Table 7.</span></a> and <a class="reference internal" href="#stackconfigurablefeatures"><span class="std std-numref">Table 7.</span></a>
list the available configuration parameters.</p>
<span id="appconfigurablefeatures"></span><table border="1" class="docutils" id="id1">
<caption><span class="caption-number">Table 6. </span><span class="caption-text">Bluetooth Low Energy Application Configuration Parameters</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="6%" />
<col width="13%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configurable?</th>
<th class="head">Define</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Y</td>
<td>BOARD_DISPLAY_USE_LCD</td>
<td>0 or 1 determines if the Display driver should use LCD</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>BOARD_DISPLAY_USE_UART</td>
<td>0 or 1 determines if the Display driver should use UART</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>BOARD_DISPLAY_USE_UART_ANSI</td>
<td>0 or 1 determines if the Display driver should use UART ANSI</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>CC26X2</td>
<td>This selects the chipset</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>CC26X2R1_LAUNCHXL</td>
<td>This define may be changed when migrating to a custom development board</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>CC26XX</td>
<td>This selects the chipset</td>
</tr>
<tr class="row-even"><td>N</td>
<td>DeviceFamily_CC26X2</td>
<td>This selects the chipset</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>Display_DISABLE_ALL</td>
<td>If set, the Display module will be disabled.</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>EXT_HAL_ASSERT</td>
<td>Defining this assert will forward ble5stack asserts to the application</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>HEAPMGR_METRICS</td>
<td>Defining this will enable heap profiling.</td>
</tr>
<tr class="row-even"><td>N</td>
<td>ICALL_EVENTS</td>
<td>This define is used with ICALL - do not modify</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>ICALL_JT</td>
<td>This define is used with ICALL - do not modify</td>
</tr>
<tr class="row-even"><td>N</td>
<td>ICALL_LITE</td>
<td>This define is used with ICALL - do not modify</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>ICALL_MAX_NUM_ENTITIES</td>
<td>This Maximum number of entities that use ICall, including service entities and application entities.</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>ICALL_MAX_NUM_TASKS</td>
<td>Defines the max number of ICall enabled tasks. Must be the same as OSAL_MAX_NUM_PROXY_TASKS. Default is 2.</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>L2CAP_NUM_CO_CHANNELS</td>
<td>Maximum number of L2CAP Connection-Oriented (CO) Channels. Default is 3.</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>L2CAP_NUM_PSM</td>
<td>Maximum number of L2CAP Protocol/Service Multiplexers (PSM). Default is 3.</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>MAX_NUM_BLE_CONNS</td>
<td>This is the maximum number of simultaneous Bluetooth low energy collections allowed. Adding more connections uses more RAM and may require increasing HEAPMGR_SIZE. Profile heap usage accordingly</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>MAX_NUM_PDU</td>
<td>Maximum number of Bluetooth low energy HCI PDUs. Default is 5. If the maximum number of connections is set to 0, then this number should also be set to 0.</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>MAX_PDU_SIZE</td>
<td>Maximum size in bytes of the Bluetooth low energy HCI PDU. Default is 27. Valid range is 27 to 255. The maximum ATT_MTU is MAX_PDU_SIZE - 4. See Configuring for Larger MTU Values.</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>NPI_SPI_CONFIG</td>
<td>When NPI_USE_API is defined, this will allows you to choose which SPI driver instance NPI will be used.</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>NPI_USE_SPI</td>
<td>Configure NPI to use SPI. Do not define NPI_USE_UART and NPI_USE_SPI at the same time.</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>NPI_USE_UART</td>
<td>Configure NPI to use UART. Do not define NPI_USE_SPI and NPI_USE_UART at the same time.</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>PM_STARTUP_MARGIN</td>
<td>Defines time in microseconds (us) the system will wake up before the start of the connection event. Default is 300. This value is optimized for the example projects.</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>POWER_SAVING</td>
<td>Power management is enabled when defined, and disabled when not defined. Requires same option in stack project</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>STACK_LIBRARY</td>
<td>Build/Use the build configuration where the stack is built as a library</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>TBM_ACTIVE_ITEMS_ONLY</td>
<td>When using the Two Button Menu, Only active items will be displayed</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>USE_ICALL</td>
<td>This define is used with ICALL - do not modify</td>
</tr>
</tbody>
</table>
<span id="stackconfigurablefeatures"></span><table border="1" class="docutils" id="id2">
<caption><span class="caption-number">Table 7. </span><span class="caption-text">Bluetooth Low Energy Stack Configuration Parameters</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="6%" />
<col width="13%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configurable?</th>
<th class="head">Define</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>N</td>
<td>CC26X2</td>
<td>This selects the chipset</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>CC26XX</td>
<td>This selects the chipset</td>
</tr>
<tr class="row-even"><td>N</td>
<td>DeviceFamily_CC26X2</td>
<td>This selects the chipset</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>EXT_HAL_ASSERT</td>
<td>Defining this assert will forward ble5stack asserts to the application</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>FLASH_ROM_BUILD</td>
<td>Setting this option will use the ble5stack with ROM APIs - decreasing flash footprint</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>ICALL_EVENTS</td>
<td>This define is used with ICALL - do not modify</td>
</tr>
<tr class="row-even"><td>N</td>
<td>ICALL_JT</td>
<td>This define is used with ICALL - do not modify</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>ICALL_LITE</td>
<td>This define is used with ICALL - do not modify</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>OSAL_CBTIMER_NUM_TASKS</td>
<td>Defines the number of osal callback tasks. Each osal callback task can contain up to 16 osal callback functions. Default is 1.</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>OSAL_MAX_NUM_PROXY_TASKS</td>
<td>Defines the max number of ICall enabled tasks. Must be the same as ICALL_MAX_NUM_TASKS. Default is 2.</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>OSAL_SNV</td>
<td>Define the number of non-volatile flash pages are to be used with the Simple Non-Volatile module. Default is 2.</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>POWER_SAVING</td>
<td>Power management is enabled when defined, and disabled when not defined. Requires same option in stack project</td>
</tr>
<tr class="row-even"><td>Y</td>
<td>RF_FE_MODE_AND_BIAS</td>
<td>Defines the RF antenna front end and bias configuration. Set this value to match the actual hardware antenna layout. This value can be set directly, or through Board.h.</td>
</tr>
<tr class="row-odd"><td>Y</td>
<td>SC_HOST_DEBUG</td>
<td>Defining this will allow you to capture over-the-air bluetooth low energy traffic that use LE Secure Connections.</td>
</tr>
<tr class="row-even"><td>N</td>
<td>STACK_LIBRARY</td>
<td>Build/Use the build configuration where the stack is built as a library</td>
</tr>
<tr class="row-odd"><td>N</td>
<td>USE_ICALL</td>
<td>This define is used with ICALL - do not modify</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ble-stack-common/memory_map.html" class="btn btn-neutral float-right" title="Memory Map" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="creating-a-custom-bluetooth-low-energy-application.html" class="btn btn-neutral" title="Defining Application Behavior" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">2010-2018, Texas Instruments</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.02.01.00',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });

        $('body').on("mousewheel", function () {
            // Remove default behavior
            event.preventDefault();
            // Scroll without smoothing
            var wheelDelta = event.wheelDelta;
            var currentScrollPosition = window.pageYOffset;
            window.scrollTo(0, currentScrollPosition - wheelDelta);
        });
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>